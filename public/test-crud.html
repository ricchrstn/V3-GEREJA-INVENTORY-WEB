<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CRUD Barang</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; border: none; }
        .btn-success { background: #28a745; color: white; border: none; }
        .btn-danger { background: #dc3545; color: white; border: none; }
    </style>
</head>
<body>
    <h1>🧪 Test CRUD Barang & Modal</h1>
    
    <div class="test-section info">
        <h3>📋 Checklist Komponen</h3>
        <div id="checklist"></div>
    </div>
    
    <div class="test-section">
        <h3>🔗 Test Routes</h3>
        <button class="btn-primary" onclick="testRoute('/pengurus/barang')">Test Index</button>
        <button class="btn-primary" onclick="testRoute('/pengurus/barang/create')">Test Create</button>
        <button class="btn-success" onclick="testRoute('/pengurus/kategori')">Test Kategori</button>
        <div id="route-results"></div>
    </div>
    
    <div class="test-section">
        <h3>📝 Test Form Submit</h3>
        <form id="testForm">
            <input type="text" name="nama" placeholder="Nama Barang" required><br><br>
            <select name="kategori_id" required>
                <option value="">Pilih Kategori</option>
                <option value="1">Elektronik</option>
                <option value="2">Furniture</option>
            </select><br><br>
            <input type="text" name="satuan" placeholder="Satuan" required><br><br>
            <input type="number" name="harga" placeholder="Harga" required><br><br>
            <input type="number" name="stok" placeholder="Stok" required><br><br>
            <button type="button" class="btn-success" onclick="testFormSubmit()">Test Submit</button>
        </form>
        <div id="form-results"></div>
    </div>

    <script>
    // Check components
    function checkComponents() {
        const checks = [
            { name: 'CSRF Token Meta', check: () => document.querySelector('meta[name="csrf-token"]') },
            { name: 'Font Awesome', check: () => document.querySelector('link[href*="font-awesome"]') },
            { name: 'Tailwind CSS', check: () => document.querySelector('link[href*="style.css"]') }
        ];
        
        let html = '<ul>';
        checks.forEach(item => {
            const status = item.check() ? '✅' : '❌';
            html += `<li>${status} ${item.name}</li>`;
        });
        html += '</ul>';
        
        document.getElementById('checklist').innerHTML = html;
    }
    
    // Test routes
    function testRoute(url) {
        const resultsDiv = document.getElementById('route-results');
        resultsDiv.innerHTML = `<p>Testing ${url}...</p>`;
        
        fetch(url, {
            method: 'GET',
            headers: {
                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
            }
        })
        .then(response => {
            if (response.ok) {
                resultsDiv.innerHTML += `<p class="success">✅ ${url} - OK (${response.status})</p>`;
            } else {
                resultsDiv.innerHTML += `<p class="error">❌ ${url} - Error (${response.status})</p>`;
            }
        })
        .catch(error => {
            resultsDiv.innerHTML += `<p class="error">❌ ${url} - Network Error: ${error.message}</p>`;
        });
    }
    
    // Test form submit
    function testFormSubmit() {
        const form = document.getElementById('testForm');
        const formData = new FormData(form);
        const resultsDiv = document.getElementById('form-results');
        
        resultsDiv.innerHTML = '<p>Testing form submission...</p>';
        
        fetch('/pengurus/barang', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRF-TOKEN': 'test-token',
                'Accept': 'application/json'
            }
        })
        .then(response => {
            if (response.ok) {
                resultsDiv.innerHTML = '<p class="success">✅ Form submitted successfully!</p>';
            } else {
                resultsDiv.innerHTML = `<p class="error">❌ Form submission failed (${response.status})</p>`;
            }
        })
        .catch(error => {
            resultsDiv.innerHTML = `<p class="error">❌ Form submission error: ${error.message}</p>`;
        });
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        checkComponents();
    });
    </script>
</body>
</html>